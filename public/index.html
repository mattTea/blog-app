<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<title>B.A(ng)</title>

<style>

#headline {
    padding: 20px 5%;
    color: white;
    font-family: Roboto, sans-serif;
    background-image: url(t-shaped-blog.JPG);
    background-size: cover;
}

#headline br {
    clear: both;
}

@media (min-width: 600px) {

}

.container {
    margin: auto;
    max-width: 800px;
    padding: 20px 5%;
}

#author img {
    width: 30%;
    margin: 1%;
    box-sizing: border-box;
    border-radius: 50% 50%;
    box-shadow: black 0px 0px 5px;
}

#footer {
    padding: 0.8em;
    color: white;
    font-family: Roboto, sans-serif;
    background-image: url(t-shaped-blog.JPG);
    background-size: cover;
}


</style>
</head>

<body>

<!-- Navigation -->
<nav>
    <ul class="w3-navbar w3-black"><!-- get own class identifiers from style.css -->
        <li><a href="javascript:void(0)">Home</a></li>
        <li><a href="javascript:void(0)">Blogs</a></li>
        <li><a href="javascript:void(0)">Author Bio</a></li>
        <li><a href="javascript:void(0)">Search</a></li>
        <li><a href="javascript:void(0)">Contact</a></li>
    </ul>
</nav>

<!-- Headline -->
<div id="headline">
    <div class="container">
        <header>
            <h1>B.A(ng)</h1>
            <p>from Business Analyst to Business Engineer?</p>
        </header>
        <div id="blurb">
            <p>chatting about my experiences whilst learning to code. and still trying to be a business analyst</p>
        </div>
    </div>
</div>


<!-- Latest Blog -->
<div class="container" id="blogs">
    <div id="blog-title" style="color:saddlebrown;font-size:150%;font-weight:bold;margin:25px;text-align:center"></div>
    <div id="blog-author" style="font-weight:bold;text-align:center"></div>
    <div id="blog-createdDate" style="font-style:italic;text-align:center"></div>
    <div id="blog-image" style="display:block;text-align:center;padding-top:10px;padding-bottom:10px"></div>
    <div id="blog-content" style="padding-top:10px;padding-bottom:10px"></div>
    
    <!-- <form id="newComment" method="post">
        <textarea id="comments-box" name="newComment" rows="4" cols="50" placeholder="Add comment..."></textarea>                
        <input type="submit" value="Submit">
    </form> -->

    <div id="comments">
        <div id="comment-header">
            <h4>comments...</h4>
        </div>
        <div id="comment-date"></div>
        <div id="blog-comments"></div>
<!--         <textarea id="comments-box" rows="4" cols="50" placeholder="Add comment..."></textarea>
        <button id="submit-button">Submit</button>  -->
    </div>

</div>


<!-- Author Details -->
<div id="author">
    <p>mattTea</p>
    <img src="mattTea.PNG" alt="matt Tea: Author">
    <p>Long time BA with a new found love of all things dev.<br>
    I lead the business analysis for all ecommerce channels at an awesome UK retailer, whilst trying to disrupt our traditional tech role boundaries.<br>
    And I race bicycles.
    </p>
</div>


<!-- Footer  MAKE <section> TO FIX TO BOTTOM WHEN MAKING AUTHOR DETAILS FLOAT? -->
<div id="footer">
    <div class="container" style="text-align:center">
        <p>mattTea | B.A(ng)</p>
    </div>
</div>



</body>

<script>
//when page has fully rendered then execute this code
$(document).ready(function () {
    var currentBlogSlug;

    //display latest blog on first page load
    var latestBlog = "https://api.cosmicjs.com/v1/matttea-blog-app/object-type/articles";
    $.get(latestBlog, function (data) {
        var latestTitle = data.objects[0].title;
        var latestAuthor = data.objects[0].metadata.author.title;
        var latestCreatedDate = data.objects[0].created_at;
        var latestDisplayDate = latestCreatedDate.charAt(8) + latestCreatedDate.charAt(9) + '/' + latestCreatedDate.charAt(5) + latestCreatedDate.charAt(6) + '/' + latestCreatedDate.charAt(0) + latestCreatedDate.charAt(1) + latestCreatedDate.charAt(2) + latestCreatedDate.charAt(3);
        var latestImage = new Image();
        latestImage.setAttribute("src", data.objects[0].metadata.hero.url);
        var latestContent = data.objects[0].content;
        currentBlogSlug = data.objects[0].slug;
        if (!!data.objects[0].metadata.comment) {
            var rawCommentDate = data.objects[0].metadata.comment.created_at;
            var commentDate = rawCommentDate.charAt(8) + rawCommentDate.charAt(9) + '/' + rawCommentDate.charAt(5) + rawCommentDate.charAt(6) + '/' + rawCommentDate.charAt(0) + rawCommentDate.charAt(1) + rawCommentDate.charAt(2) + rawCommentDate.charAt(3);
            var comments = data.objects[0].metadata.comment.content;
            $("#comment-date").empty();
            $("#blog-comments").empty();
            $("#comment-date").append(commentDate);
            $("#blog-comments").append(comments);                        
        } else {
            $("#comment-date").empty();
            $("#blog-comments").empty();
        }

        $("#blog-title").html(latestTitle);
        $("#blog-author").html(latestAuthor);
        $("#blog-createdDate").html(latestDisplayDate);
        $("#blog-image").html(latestImage);
        $("#blog-content").html(latestContent);

        console.log('latest blog returned, got', data);
    });
});

</script>



</html>